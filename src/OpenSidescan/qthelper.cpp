
#include <stdlib.h>     /* srand, rand */
#include <math.h>       /* fmod */


#include "qthelper.h"


double fn( const double n,
           const double h360,
           const double saturation01,
           const double value01 )
{

    double k = fmod( n + h360 / 60, 6.0 );

    double minimum = k;

    if ( 4 - k < minimum )
        minimum = 4 - k;

    if ( 1 < minimum )
        minimum = 1.0;

    double maximum;

    if ( minimum > 0 )
        maximum = minimum;
    else
        maximum = 0.0;


    return value01 - value01 * saturation01 * maximum;
}

void HSVtoRGB( const double h360,
               const double saturation01,
               const double value01,
               std::vector<int> & rgb )
{

    // Each of R, G, B, is within [0, 1]

    if ( rgb.size() != 3 )
        rgb.resize( 3 );

    rgb[ 0 ] = static_cast<int>( fn( 5, h360, saturation01, value01 ) * 256 );
    rgb[ 1 ] = static_cast<int>( fn( 3, h360, saturation01, value01 ) * 256 );
    rgb[ 2 ] = static_cast<int>( fn( 1, h360, saturation01, value01 ) * 256 );

}




QtHelper::QtHelper()
{

}


QImage  QtHelper::cvMatToQImage( const cv::Mat &inMat )
{
   switch ( inMat.type() )
   {
      // 8-bit, 4 channel
      case CV_8UC4:
      {
         std::cout << "\nQtHelper::cvMatToQImage(), CV_8UC4\n" << std::endl;

         QImage image( inMat.data,
                       inMat.cols, inMat.rows,
                       static_cast<int>(inMat.step),
                       QImage::Format_ARGB32 );

         return image;
      }

      // 8-bit, 3 channel
      case CV_8UC3:
      {
         std::cout << "\nQtHelper::cvMatToQImage(), CV_8UC3\n" << std::endl;

         QImage image( inMat.data,
                       inMat.cols, inMat.rows,
                       static_cast<int>(inMat.step),
                       QImage::Format_RGB888 );

         return image.rgbSwapped();
      }

      // 8-bit, 1 channel
      case CV_8UC1:
      {
#if QT_VERSION >= QT_VERSION_CHECK(5, 5, 0)

         std::cout << "\nQtHelper::cvMatToQImage(), CV_8UC1, if QT_VERSION >= QT_VERSION_CHECK(5, 5, 0)\n" << std::endl;

//         QImage image( inMat.data,
//                       inMat.cols, inMat.rows,
//                       static_cast<int>(inMat.step),
//                       QImage::Format_Grayscale8 );

//        image = image.convertToFormat(QImage::Format_Indexed8 );


         QImage image( inMat.data,
                       inMat.cols, inMat.rows,
                       static_cast<int>(inMat.step),
                       QImage::Format_Indexed8 );

//        std::cout << "\ninMat.cols:                   " << inMat.cols << "\n"
//                    << "inMat.rows:                   " << inMat.rows << "\n"
//                    << "static_cast<int>(inMat.step): " << static_cast<int>(inMat.step) << "\n" << std::endl;


//        srand (time(NULL)); // initialize random seed


         int tableInt[ 256 ][ 3 ] = {

             // Random
//             { 0, 0, 0},
//             { 5, 0, 6},
//             { 8, 14, 2},
//             { 13, 16, 5},
//             { 15, 0, 12},
//             { 15, 15, 3},
//             { 17, 11, 0},
//             { 18, 19, 11},
//             { 20, 16, 17},
//             { 21, 5, 15},
//             { 22, 28, 2},
//             { 24, 0, 2},
//             { 25, 3, 6},
//             { 25, 19, 0},
//             { 27, 1, 0},
//             { 27, 16, 20},
//             { 28, 0, 6},
//             { 29, 0, 5},
//             { 31, 42, 0},
//             { 35, 19, 4},
//             { 38, 26, 10},
//             { 39, 0, 27},
//             { 39, 38, 10},
//             { 47, 31, 8},
//             { 48, 23, 18},
//             { 48, 40, 3},
//             { 49, 16, 7},
//             { 53, 20, 13},
//             { 53, 37, 3},
//             { 55, 12, 32},
//             { 56, 13, 0},
//             { 56, 31, 34},
//             { 57, 16, 10},
//             { 57, 34, 0},
//             { 61, 10, 9},
//             { 63, 37, 0},
//             { 66, 48, 10},
//             { 67, 33, 21},
//             { 69, 31, 22},
//             { 69, 46, 4},
//             { 71, 28, 12},
//             { 72, 52, 15},
//             { 73, 36, 17},
//             { 74, 32, 20},
//             { 74, 59, 40},
//             { 75, 43, 20},
//             { 79, 29, 6},
//             { 79, 59, 6},
//             { 80, 56, 8},
//             { 82, 47, 19},
//             { 82, 75, 33},
//             { 84, 62, 12},
//             { 84, 78, 2},
//             { 85, 57, 56},
//             { 86, 36, 37},
//             { 86, 64, 4},
//             { 88, 52, 30},
//             { 89, 70, 11},
//             { 90, 54, 28},
//             { 90, 65, 45},
//             { 93, 66, 23},
//             { 93, 78, 11},
//             { 97, 37, 3},
//             { 99, 50, 17},
//             { 100, 76, 50},
//             { 101, 78, 10},
//             { 102, 56, 22},
//             { 102, 68, 7},
//             { 103, 68, 10},
//             { 103, 91, 39},
//             { 104, 78, 29},
//             { 105, 57, 37},
//             { 106, 56, 5},
//             { 106, 89, 45},
//             { 107, 68, 27},
//             { 109, 64, 31},
//             { 111, 59, 1},
//             { 111, 92, 24},
//             { 112, 71, 5},
//             { 113, 69, 4},
//             { 113, 113, 59},
//             { 115, 77, 15},
//             { 115, 86, 26},
//             { 116, 76, 4},
//             { 117, 71, 11},
//             { 117, 81, 5},
//             { 121, 92, 12},
//             { 122, 77, 18},
//             { 122, 95, 48},
//             { 122, 113, 22},
//             { 123, 72, 6},
//             { 124, 86, 37},
//             { 124, 108, 49},
//             { 126, 60, 2},
//             { 126, 87, 30},
//             { 126, 108, 0},
//             { 132, 90, 32},
//             { 132, 99, 2},
//             { 132, 109, 13},
//             { 133, 103, 5},
//             { 134, 127, 85},
//             { 135, 94, 2},
//             { 136, 121, 62},
//             { 137, 109, 9},
//             { 139, 100, 7},
//             { 141, 95, 0},
//             { 143, 73, 3},
//             { 143, 99, 26},
//             { 144, 101, 9},
//             { 146, 84, 11},
//             { 148, 138, 23},
//             { 149, 93, 16},
//             { 150, 118, 19},
//             { 151, 95, 18},
//             { 153, 107, 30},
//             { 154, 82, 8},
//             { 156, 111, 30},
//             { 157, 93, 29},
//             { 157, 130, 25},
//             { 158, 93, 25},
//             { 158, 105, 0},
//             { 159, 95, 0},
//             { 159, 114, 29},
//             { 160, 114, 3},
//             { 160, 121, 54},
//             { 161, 114, 34},
//             { 161, 131, 33},
//             { 162, 113, 46},
//             { 164, 120, 49},
//             { 164, 128, 40},
//             { 166, 104, 29},
//             { 166, 130, 10},
//             { 168, 105, 0},
//             { 168, 130, 21},
//             { 168, 142, 23},
//             { 170, 122, 24},
//             { 171, 105, 29},
//             { 171, 131, 17},
//             { 171, 141, 17},
//             { 172, 124, 39},
//             { 172, 131, 52},
//             { 174, 117, 10},
//             { 175, 117, 18},
//             { 175, 125, 12},
//             { 176, 116, 4},
//             { 177, 132, 7},
//             { 179, 113, 27},
//             { 179, 149, 17},
//             { 180, 130, 41},
//             { 181, 109, 0},
//             { 181, 129, 20},
//             { 184, 159, 43},
//             { 186, 127, 61},
//             { 186, 153, 48},
//             { 187, 134, 30},
//             { 187, 141, 30},
//             { 187, 192, 92},
//             { 188, 149, 30},
//             { 189, 133, 36},
//             { 190, 131, 53},
//             { 190, 139, 30},
//             { 190, 157, 42},
//             { 191, 130, 5},
//             { 191, 137, 41},
//             { 191, 144, 72},
//             { 193, 128, 34},
//             { 193, 136, 69},
//             { 193, 171, 51},
//             { 195, 153, 19},
//             { 196, 152, 47},
//             { 197, 145, 7},
//             { 198, 126, 44},
//             { 198, 158, 37},
//             { 202, 157, 66},
//             { 202, 169, 14},
//             { 203, 133, 35},
//             { 207, 140, 35},
//             { 208, 155, 53},
//             { 209, 155, 47},
//             { 210, 147, 34},
//             { 211, 135, 59},
//             { 212, 161, 46},
//             { 212, 187, 105},
//             { 213, 169, 44},
//             { 214, 147, 7},
//             { 215, 180, 88},
//             { 216, 162, 40},
//             { 216, 170, 23},
//             { 216, 185, 58},
//             { 217, 180, 89},
//             { 218, 177, 25},
//             { 218, 194, 24},
//             { 219, 160, 24},
//             { 219, 186, 73},
//             { 220, 188, 115},
//             { 221, 187, 54},
//             { 223, 184, 57},
//             { 224, 159, 69},
//             { 225, 159, 63},
//             { 225, 167, 31},
//             { 226, 204, 131},
//             { 227, 169, 33},
//             { 227, 184, 80},
//             { 228, 160, 87},
//             { 228, 169, 33},
//             { 228, 184, 77},
//             { 229, 173, 148},
//             { 229, 190, 85},
//             { 231, 171, 25},
//             { 232, 176, 63},
//             { 232, 183, 65},
//             { 232, 192, 120},
//             { 233, 188, 45},
//             { 234, 186, 84},
//             { 235, 177, 41},
//             { 235, 203, 94},
//             { 236, 181, 101},
//             { 237, 187, 92},
//             { 237, 215, 96},
//             { 240, 195, 68},
//             { 241, 176, 34},
//             { 242, 167, 50},
//             { 242, 180, 33},
//             { 242, 193, 91},
//             { 243, 185, 16},
//             { 243, 191, 115},
//             { 244, 181, 104},
//             { 244, 204, 47},
//             { 245, 197, 69},
//             { 245, 206, 77},
//             { 246, 172, 49},
//             { 246, 186, 40},
//             { 247, 195, 59},
//             { 249, 168, 16},
//             { 249, 187, 26},
//             { 249, 194, 77},
//             { 249, 209, 87},
//             { 251, 192, 74},
//             { 251, 207, 142},
//             { 252, 167, 61},
//             { 253, 213, 177},
//             { 253, 220, 55},
//             { 254, 193, 50},
//             { 254, 205, 87},
//             { 254, 210, 113},
//             { 254, 219, 127},
//             { 254, 255, 215},
//             { 255, 186, 109},
//             { 255, 193, 75},
//             { 255, 197, 67},
//             { 255, 226, 116},
//             { 255, 228, 119},
//             { 255, 234, 127},
//             { 255, 240, 214},
//             { 255, 245, 183}


            // Changing only value      rgb = HSVtoRGB( hsv1[ 0 ] * 360, hsv1[ 1 ], value )
//             { 0, 0, 0},
//             { 1, 0, 0},
//             { 2, 1, 0},
//             { 3, 2, 0},
//             { 4, 2, 0},
//             { 5, 3, 0},
//             { 6, 4, 0},
//             { 7, 4, 0},
//             { 8, 5, 0},
//             { 9, 6, 0},
//             { 10, 6, 0},
//             { 11, 7, 1},
//             { 12, 8, 1},
//             { 13, 8, 1},
//             { 14, 9, 1},
//             { 15, 10, 1},
//             { 16, 10, 1},
//             { 17, 11, 1},
//             { 18, 12, 1},
//             { 19, 13, 1},
//             { 20, 13, 1},
//             { 21, 14, 2},
//             { 22, 15, 2},
//             { 23, 15, 2},
//             { 24, 16, 2},
//             { 25, 17, 2},
//             { 26, 17, 2},
//             { 27, 18, 2},
//             { 28, 19, 2},
//             { 29, 19, 2},
//             { 30, 20, 2},
//             { 31, 21, 3},
//             { 32, 21, 3},
//             { 33, 22, 3},
//             { 34, 23, 3},
//             { 35, 24, 3},
//             { 36, 24, 3},
//             { 37, 25, 3},
//             { 38, 26, 3},
//             { 39, 26, 3},
//             { 40, 27, 3},
//             { 41, 28, 4},
//             { 42, 28, 4},
//             { 43, 29, 4},
//             { 44, 30, 4},
//             { 45, 30, 4},
//             { 46, 31, 4},
//             { 47, 32, 4},
//             { 48, 32, 4},
//             { 49, 33, 4},
//             { 50, 34, 4},
//             { 51, 34, 5},
//             { 52, 35, 5},
//             { 53, 36, 5},
//             { 54, 37, 5},
//             { 55, 37, 5},
//             { 56, 38, 5},
//             { 57, 39, 5},
//             { 58, 39, 5},
//             { 59, 40, 5},
//             { 60, 41, 5},
//             { 61, 41, 6},
//             { 62, 42, 6},
//             { 63, 43, 6},
//             { 64, 43, 6},
//             { 65, 44, 6},
//             { 66, 45, 6},
//             { 67, 45, 6},
//             { 68, 46, 6},
//             { 69, 47, 6},
//             { 70, 48, 6},
//             { 71, 48, 7},
//             { 72, 49, 7},
//             { 73, 50, 7},
//             { 74, 50, 7},
//             { 75, 51, 7},
//             { 76, 52, 7},
//             { 77, 52, 7},
//             { 78, 53, 7},
//             { 79, 54, 7},
//             { 80, 54, 7},
//             { 81, 55, 8},
//             { 82, 56, 8},
//             { 83, 56, 8},
//             { 84, 57, 8},
//             { 85, 58, 8},
//             { 86, 58, 8},
//             { 87, 59, 8},
//             { 88, 60, 8},
//             { 89, 61, 8},
//             { 90, 61, 8},
//             { 91, 62, 9},
//             { 92, 63, 9},
//             { 93, 63, 9},
//             { 94, 64, 9},
//             { 95, 65, 9},
//             { 96, 65, 9},
//             { 97, 66, 9},
//             { 98, 67, 9},
//             { 99, 67, 9},
//             { 100, 68, 9},
//             { 101, 69, 10},
//             { 102, 69, 10},
//             { 103, 70, 10},
//             { 104, 71, 10},
//             { 105, 72, 10},
//             { 106, 72, 10},
//             { 107, 73, 10},
//             { 108, 74, 10},
//             { 109, 74, 10},
//             { 110, 75, 10},
//             { 111, 76, 11},
//             { 112, 76, 11},
//             { 113, 77, 11},
//             { 114, 78, 11},
//             { 115, 78, 11},
//             { 116, 79, 11},
//             { 117, 80, 11},
//             { 118, 80, 11},
//             { 119, 81, 11},
//             { 120, 82, 11},
//             { 121, 82, 12},
//             { 122, 83, 12},
//             { 123, 84, 12},
//             { 124, 85, 12},
//             { 125, 85, 12},
//             { 126, 86, 12},
//             { 127, 87, 12},
//             { 128, 87, 12},
//             { 129, 88, 12},
//             { 130, 89, 12},
//             { 131, 89, 13},
//             { 132, 90, 13},
//             { 133, 91, 13},
//             { 134, 91, 13},
//             { 135, 92, 13},
//             { 136, 93, 13},
//             { 137, 93, 13},
//             { 138, 94, 13},
//             { 139, 95, 13},
//             { 140, 96, 13},
//             { 141, 96, 14},
//             { 142, 97, 14},
//             { 143, 98, 14},
//             { 144, 98, 14},
//             { 145, 99, 14},
//             { 146, 100, 14},
//             { 147, 100, 14},
//             { 148, 101, 14},
//             { 149, 102, 14},
//             { 150, 102, 14},
//             { 151, 103, 15},
//             { 152, 104, 15},
//             { 153, 104, 15},
//             { 154, 105, 15},
//             { 155, 106, 15},
//             { 156, 106, 15},
//             { 157, 107, 15},
//             { 158, 108, 15},
//             { 159, 109, 15},
//             { 160, 109, 15},
//             { 161, 110, 16},
//             { 162, 111, 16},
//             { 163, 111, 16},
//             { 164, 112, 16},
//             { 165, 113, 16},
//             { 166, 113, 16},
//             { 167, 114, 16},
//             { 168, 115, 16},
//             { 169, 115, 16},
//             { 170, 116, 16},
//             { 171, 117, 17},
//             { 172, 117, 17},
//             { 173, 118, 17},
//             { 174, 119, 17},
//             { 175, 120, 17},
//             { 176, 120, 17},
//             { 177, 121, 17},
//             { 178, 122, 17},
//             { 179, 122, 17},
//             { 180, 123, 17},
//             { 181, 124, 18},
//             { 182, 124, 18},
//             { 183, 125, 18},
//             { 184, 126, 18},
//             { 185, 126, 18},
//             { 186, 127, 18},
//             { 187, 128, 18},
//             { 188, 128, 18},
//             { 189, 129, 18},
//             { 190, 130, 18},
//             { 191, 130, 19},
//             { 192, 131, 19},
//             { 193, 132, 19},
//             { 194, 133, 19},
//             { 195, 133, 19},
//             { 196, 134, 19},
//             { 197, 135, 19},
//             { 198, 135, 19},
//             { 199, 136, 19},
//             { 200, 137, 19},
//             { 201, 137, 19},
//             { 202, 138, 20},
//             { 203, 139, 20},
//             { 204, 139, 20},
//             { 205, 140, 20},
//             { 206, 141, 20},
//             { 207, 141, 20},
//             { 208, 142, 20},
//             { 209, 143, 20},
//             { 210, 144, 20},
//             { 211, 144, 20},
//             { 212, 145, 21},
//             { 213, 146, 21},
//             { 214, 146, 21},
//             { 215, 147, 21},
//             { 216, 148, 21},
//             { 217, 148, 21},
//             { 218, 149, 21},
//             { 219, 150, 21},
//             { 220, 150, 21},
//             { 221, 151, 21},
//             { 222, 152, 22},
//             { 223, 152, 22},
//             { 224, 153, 22},
//             { 225, 154, 22},
//             { 226, 155, 22},
//             { 227, 155, 22},
//             { 228, 156, 22},
//             { 229, 157, 22},
//             { 230, 157, 22},
//             { 231, 158, 22},
//             { 232, 159, 23},
//             { 233, 159, 23},
//             { 234, 160, 23},
//             { 235, 161, 23},
//             { 236, 161, 23},
//             { 237, 162, 23},
//             { 238, 163, 23},
//             { 239, 163, 23},
//             { 240, 164, 23},
//             { 241, 165, 23},
//             { 242, 165, 24},
//             { 243, 166, 24},
//             { 244, 167, 24},
//             { 245, 168, 24},
//             { 246, 168, 24},
//             { 247, 169, 24},
//             { 248, 170, 24},
//             { 249, 170, 24},
//             { 250, 171, 24},
//             { 251, 172, 24},
//             { 252, 172, 25},
//             { 253, 173, 25},
//             { 254, 174, 25}

            // Changing both Saturation and Value       rgb = HSVtoRGB( hsv1[ 0 ] * 360, value, value )
//             { 0, 0, 0},
//             { 1, 0, 0},
//             { 2, 1, 1},
//             { 3, 2, 2},
//             { 4, 3, 3},
//             { 5, 4, 4},
//             { 6, 5, 5},
//             { 7, 6, 6},
//             { 8, 7, 7},
//             { 9, 8, 8},
//             { 10, 9, 9},
//             { 11, 10, 10},
//             { 12, 11, 11},
//             { 13, 12, 12},
//             { 14, 13, 13},
//             { 15, 14, 14},
//             { 16, 15, 15},
//             { 17, 16, 15},
//             { 18, 17, 16},
//             { 19, 18, 17},
//             { 20, 19, 18},
//             { 21, 20, 19},
//             { 22, 21, 20},
//             { 23, 22, 20},
//             { 24, 23, 21},
//             { 25, 24, 22},
//             { 26, 25, 23},
//             { 27, 26, 24},
//             { 28, 26, 24},
//             { 29, 27, 25},
//             { 30, 28, 26},
//             { 31, 29, 27},
//             { 32, 30, 28},
//             { 33, 31, 28},
//             { 34, 32, 29},
//             { 35, 33, 30},
//             { 36, 34, 30},
//             { 37, 35, 31},
//             { 38, 36, 32},
//             { 39, 36, 33},
//             { 40, 37, 33},
//             { 41, 38, 34},
//             { 42, 39, 35},
//             { 43, 40, 35},
//             { 44, 41, 36},
//             { 45, 42, 37},
//             { 46, 43, 37},
//             { 47, 43, 38},
//             { 48, 44, 39},
//             { 49, 45, 39},
//             { 50, 46, 40},
//             { 51, 47, 40},
//             { 52, 48, 41},
//             { 53, 49, 42},
//             { 54, 50, 42},
//             { 55, 50, 43},
//             { 56, 51, 43},
//             { 57, 52, 44},
//             { 58, 53, 44},
//             { 59, 54, 45},
//             { 60, 55, 45},
//             { 61, 55, 46},
//             { 62, 56, 46},
//             { 63, 57, 47},
//             { 64, 58, 48},
//             { 65, 59, 48},
//             { 66, 60, 48},
//             { 67, 60, 49},
//             { 68, 61, 49},
//             { 69, 62, 50},
//             { 70, 63, 50},
//             { 71, 64, 51},
//             { 72, 64, 51},
//             { 73, 65, 52},
//             { 74, 66, 52},
//             { 75, 67, 53},
//             { 76, 68, 53},
//             { 77, 68, 53},
//             { 78, 69, 54},
//             { 79, 70, 54},
//             { 80, 71, 55},
//             { 81, 72, 55},
//             { 82, 72, 55},
//             { 83, 73, 56},
//             { 84, 74, 56},
//             { 85, 75, 56},
//             { 86, 75, 57},
//             { 87, 76, 57},
//             { 88, 77, 57},
//             { 89, 78, 58},
//             { 90, 78, 58},
//             { 91, 79, 58},
//             { 92, 80, 58},
//             { 93, 81, 59},
//             { 94, 81, 59},
//             { 95, 82, 59},
//             { 96, 83, 60},
//             { 97, 84, 60},
//             { 98, 84, 60},
//             { 99, 85, 60},
//             { 100, 86, 60},
//             { 101, 87, 61},
//             { 102, 87, 61},
//             { 103, 88, 61},
//             { 104, 89, 61},
//             { 105, 89, 61},
//             { 106, 90, 62},
//             { 107, 91, 62},
//             { 108, 92, 62},
//             { 109, 92, 62},
//             { 110, 93, 62},
//             { 111, 94, 62},
//             { 112, 94, 63},
//             { 113, 95, 63},
//             { 114, 96, 63},
//             { 115, 96, 63},
//             { 116, 97, 63},
//             { 117, 98, 63},
//             { 118, 99, 63},
//             { 119, 99, 63},
//             { 120, 100, 63},
//             { 121, 101, 63},
//             { 122, 101, 63},
//             { 123, 102, 63},
//             { 124, 103, 63},
//             { 125, 103, 63},
//             { 126, 104, 63},
//             { 127, 105, 63},
//             { 128, 105, 64},
//             { 129, 106, 63},
//             { 130, 106, 63},
//             { 131, 107, 63},
//             { 132, 108, 63},
//             { 133, 108, 63},
//             { 134, 109, 63},
//             { 135, 110, 63},
//             { 136, 110, 63},
//             { 137, 111, 63},
//             { 138, 112, 63},
//             { 139, 112, 63},
//             { 140, 113, 63},
//             { 141, 113, 63},
//             { 142, 114, 63},
//             { 143, 115, 63},
//             { 144, 115, 63},
//             { 145, 116, 62},
//             { 146, 116, 62},
//             { 147, 117, 62},
//             { 148, 118, 62},
//             { 149, 118, 62},
//             { 150, 119, 62},
//             { 151, 119, 61},
//             { 152, 120, 61},
//             { 153, 121, 61},
//             { 154, 121, 61},
//             { 155, 122, 61},
//             { 156, 122, 60},
//             { 157, 123, 60},
//             { 158, 123, 60},
//             { 159, 124, 60},
//             { 160, 125, 60},
//             { 161, 125, 59},
//             { 162, 126, 59},
//             { 163, 126, 59},
//             { 164, 127, 58},
//             { 165, 127, 58},
//             { 166, 128, 58},
//             { 167, 128, 58},
//             { 168, 129, 57},
//             { 169, 130, 57},
//             { 170, 130, 57},
//             { 171, 131, 56},
//             { 172, 131, 56},
//             { 173, 132, 56},
//             { 174, 132, 55},
//             { 175, 133, 55},
//             { 176, 133, 55},
//             { 177, 134, 54},
//             { 178, 134, 54},
//             { 179, 135, 53},
//             { 180, 135, 53},
//             { 181, 136, 53},
//             { 182, 136, 52},
//             { 183, 137, 52},
//             { 184, 137, 51},
//             { 185, 138, 51},
//             { 186, 138, 50},
//             { 187, 139, 50},
//             { 188, 139, 49},
//             { 189, 140, 49},
//             { 190, 140, 48},
//             { 191, 141, 48},
//             { 192, 141, 48},
//             { 193, 142, 47},
//             { 194, 142, 46},
//             { 195, 143, 46},
//             { 196, 143, 45},
//             { 197, 144, 45},
//             { 198, 144, 44},
//             { 199, 145, 44},
//             { 200, 145, 43},
//             { 201, 145, 43},
//             { 202, 146, 42},
//             { 203, 146, 42},
//             { 204, 147, 41},
//             { 205, 147, 40},
//             { 206, 148, 40},
//             { 207, 148, 39},
//             { 208, 149, 39},
//             { 209, 149, 38},
//             { 210, 149, 37},
//             { 211, 150, 37},
//             { 212, 150, 36},
//             { 213, 151, 35},
//             { 214, 151, 35},
//             { 215, 152, 34},
//             { 216, 152, 33},
//             { 217, 152, 33},
//             { 218, 153, 32},
//             { 219, 153, 31},
//             { 220, 154, 30},
//             { 221, 154, 30},
//             { 222, 154, 29},
//             { 223, 155, 28},
//             { 224, 155, 28},
//             { 225, 156, 27},
//             { 226, 156, 26},
//             { 227, 156, 25},
//             { 228, 157, 24},
//             { 229, 157, 24},
//             { 230, 157, 23},
//             { 231, 158, 22},
//             { 232, 158, 21},
//             { 233, 159, 20},
//             { 234, 159, 20},
//             { 235, 159, 19},
//             { 236, 160, 18},
//             { 237, 160, 17},
//             { 238, 160, 16},
//             { 239, 161, 15},
//             { 240, 161, 15},
//             { 241, 161, 14},
//             { 242, 162, 13},
//             { 243, 162, 12},
//             { 244, 162, 11},
//             { 245, 163, 10},
//             { 246, 163, 9},
//             { 247, 163, 8},
//             { 248, 164, 7},
//             { 249, 164, 6},
//             { 250, 164, 5},
//             { 251, 165, 4},
//             { 252, 165, 3},
//             { 253, 165, 2},
//             { 254, 166, 1}


             // Changing both Saturation and Value rgb = HSVtoRGB( hsv1[ 0 ] * 360, hsv1[ 1 ] - 0.1 + value * 0.1, value )
             { 0, 0, 0},
             { 1, 0, 0},
             { 2, 1, 0},
             { 3, 2, 0},
             { 4, 2, 0},
             { 5, 3, 0},
             { 6, 4, 1},
             { 7, 5, 1},
             { 8, 5, 1},
             { 9, 6, 1},
             { 10, 7, 1},
             { 11, 7, 2},
             { 12, 8, 2},
             { 13, 9, 2},
             { 14, 10, 2},
             { 15, 10, 2},
             { 16, 11, 3},
             { 17, 12, 3},
             { 18, 12, 3},
             { 19, 13, 3},
             { 20, 14, 3},
             { 21, 15, 4},
             { 22, 15, 4},
             { 23, 16, 4},
             { 24, 17, 4},
             { 25, 17, 4},
             { 26, 18, 4},
             { 27, 19, 5},
             { 28, 20, 5},
             { 29, 20, 5},
             { 30, 21, 5},
             { 31, 22, 5},
             { 32, 22, 5},
             { 33, 23, 6},
             { 34, 24, 6},
             { 35, 25, 6},
             { 36, 25, 6},
             { 37, 26, 6},
             { 38, 27, 7},
             { 39, 27, 7},
             { 40, 28, 7},
             { 41, 29, 7},
             { 42, 30, 7},
             { 43, 30, 7},
             { 44, 31, 8},
             { 45, 32, 8},
             { 46, 32, 8},
             { 47, 33, 8},
             { 48, 34, 8},
             { 49, 34, 8},
             { 50, 35, 8},
             { 51, 36, 9},
             { 52, 37, 9},
             { 53, 37, 9},
             { 54, 38, 9},
             { 55, 39, 9},
             { 56, 39, 9},
             { 57, 40, 10},
             { 58, 41, 10},
             { 59, 42, 10},
             { 60, 42, 10},
             { 61, 43, 10},
             { 62, 44, 10},
             { 63, 44, 11},
             { 64, 45, 11},
             { 65, 46, 11},
             { 66, 46, 11},
             { 67, 47, 11},
             { 68, 48, 11},
             { 69, 49, 11},
             { 70, 49, 12},
             { 71, 50, 12},
             { 72, 51, 12},
             { 73, 51, 12},
             { 74, 52, 12},
             { 75, 53, 12},
             { 76, 53, 12},
             { 77, 54, 13},
             { 78, 55, 13},
             { 79, 56, 13},
             { 80, 56, 13},
             { 81, 57, 13},
             { 82, 58, 13},
             { 83, 58, 13},
             { 84, 59, 13},
             { 85, 60, 14},
             { 86, 60, 14},
             { 87, 61, 14},
             { 88, 62, 14},
             { 89, 63, 14},
             { 90, 63, 14},
             { 91, 64, 14},
             { 92, 65, 15},
             { 93, 65, 15},
             { 94, 66, 15},
             { 95, 67, 15},
             { 96, 67, 15},
             { 97, 68, 15},
             { 98, 69, 15},
             { 99, 70, 15},
             { 100, 70, 16},
             { 101, 71, 16},
             { 102, 72, 16},
             { 103, 72, 16},
             { 104, 73, 16},
             { 105, 74, 16},
             { 106, 74, 16},
             { 107, 75, 16},
             { 108, 76, 16},
             { 109, 76, 17},
             { 110, 77, 17},
             { 111, 78, 17},
             { 112, 79, 17},
             { 113, 79, 17},
             { 114, 80, 17},
             { 115, 81, 17},
             { 116, 81, 17},
             { 117, 82, 17},
             { 118, 83, 18},
             { 119, 83, 18},
             { 120, 84, 18},
             { 121, 85, 18},
             { 122, 85, 18},
             { 123, 86, 18},
             { 124, 87, 18},
             { 125, 87, 18},
             { 126, 88, 18},
             { 127, 89, 19},
             { 128, 90, 19},
             { 129, 90, 19},
             { 130, 91, 19},
             { 131, 92, 19},
             { 132, 92, 19},
             { 133, 93, 19},
             { 134, 94, 19},
             { 135, 94, 19},
             { 136, 95, 19},
             { 137, 96, 19},
             { 138, 96, 20},
             { 139, 97, 20},
             { 140, 98, 20},
             { 141, 98, 20},
             { 142, 99, 20},
             { 143, 100, 20},
             { 144, 100, 20},
             { 145, 101, 20},
             { 146, 102, 20},
             { 147, 103, 20},
             { 148, 103, 20},
             { 149, 104, 21},
             { 150, 105, 21},
             { 151, 105, 21},
             { 152, 106, 21},
             { 153, 107, 21},
             { 154, 107, 21},
             { 155, 108, 21},
             { 156, 109, 21},
             { 157, 109, 21},
             { 158, 110, 21},
             { 159, 111, 21},
             { 160, 111, 21},
             { 161, 112, 21},
             { 162, 113, 22},
             { 163, 113, 22},
             { 164, 114, 22},
             { 165, 115, 22},
             { 166, 115, 22},
             { 167, 116, 22},
             { 168, 117, 22},
             { 169, 117, 22},
             { 170, 118, 22},
             { 171, 119, 22},
             { 172, 119, 22},
             { 173, 120, 22},
             { 174, 121, 22},
             { 175, 121, 22},
             { 176, 122, 23},
             { 177, 123, 23},
             { 178, 123, 23},
             { 179, 124, 23},
             { 180, 125, 23},
             { 181, 125, 23},
             { 182, 126, 23},
             { 183, 127, 23},
             { 184, 128, 23},
             { 185, 128, 23},
             { 186, 129, 23},
             { 187, 130, 23},
             { 188, 130, 23},
             { 189, 131, 23},
             { 190, 132, 23},
             { 191, 132, 23},
             { 192, 133, 23},
             { 193, 134, 23},
             { 194, 134, 23},
             { 195, 135, 24},
             { 196, 136, 24},
             { 197, 136, 24},
             { 198, 137, 24},
             { 199, 138, 24},
             { 200, 138, 24},
             { 201, 139, 24},
             { 202, 140, 24},
             { 203, 140, 24},
             { 204, 141, 24},
             { 205, 142, 24},
             { 206, 142, 24},
             { 207, 143, 24},
             { 208, 144, 24},
             { 209, 144, 24},
             { 210, 145, 24},
             { 211, 146, 24},
             { 212, 146, 24},
             { 213, 147, 24},
             { 214, 147, 24},
             { 215, 148, 24},
             { 216, 149, 24},
             { 217, 149, 24},
             { 218, 150, 24},
             { 219, 151, 24},
             { 220, 151, 24},
             { 221, 152, 25},
             { 222, 153, 25},
             { 223, 153, 25},
             { 224, 154, 25},
             { 225, 155, 25},
             { 226, 155, 25},
             { 227, 156, 25},
             { 228, 157, 25},
             { 229, 157, 25},
             { 230, 158, 25},
             { 231, 159, 25},
             { 232, 159, 25},
             { 233, 160, 25},
             { 234, 161, 25},
             { 235, 161, 25},
             { 236, 162, 25},
             { 237, 163, 25},
             { 238, 163, 25},
             { 239, 164, 25},
             { 240, 165, 25},
             { 241, 165, 25},
             { 242, 166, 25},
             { 243, 167, 25},
             { 244, 167, 25},
             { 245, 168, 25},
             { 246, 169, 25},
             { 247, 169, 25},
             { 248, 170, 25},
             { 249, 171, 25},
             { 250, 171, 25},
             { 251, 172, 25},
             { 252, 172, 25},
             { 253, 173, 25},
             { 254, 174, 25}


         };




         double hue360 = 39.069767441860456;
         double saturation = 0.9005235602094241;

         std::vector<int> rgb;



         QVector<QRgb> table( 256 );
         for( int i = 0; i < 255; ++i )
         {
//             table[i] = qRgb( rand() % 256, rand() % 256, rand() % 256); // random
//             table[i] = qRgb( 255-i, i,  ( i + 128 ) % 256 );
//             table[i] = qRgb( i, i, i ); // Greyscale
//             table[i] = qRgb( i, i, 0 ); // yellow

//             table[i] = qRgb( i, static_cast<int>( i * 200.0/256)  , static_cast<int>( i * 50/256) );

//             table[i] = qRgb( tableInt[ i ][ 0 ], tableInt[ i ][ 1 ] , tableInt[ i ][ 2 ] );



             HSVtoRGB( hue360, saturation, i / 256.0, rgb );


             table[i] = qRgb( rgb[ 0 ], rgb[ 1 ] , rgb[ 2 ] );


//             std::cout << std::hex << static_cast<unsigned int >( table[ i ] ) << std::dec << "\n";

         }

         // The found objects' bonding box is displayed with a white rectangle
         // The color white must be in the color table
         table[255] = qRgb( 255, 255, 255 );

         // The object names are displayed in black, Does black have to be in the color table?

         image.setColorTable(table);


#else

       std::cout << "\nQtHelper::cvMatToQImage(), CV_8UC1, NOT( if QT_VERSION >= QT_VERSION_CHECK(5, 5, 0) )\n" << std::endl;

         static QVector<QRgb>  sColorTable;

         // only create our color table the first time
         if ( sColorTable.isEmpty() )
         {
            sColorTab
                    //Display object width
                    le.resize( 256 );

            for ( int i = 0; i < 256; ++i )
            {
               sColorTable[i] = qRgb( i, i, i );
            }
         }

         QImage image( inMat.data,std::to_string(xDistance)std::to_string(xDistance)
                       inMat.cols, inMat.rows,
                       static_cast<int>(inMat.step),std::to_string(xDistance)
                       QImage::Format_Indexed8 );

         image.setColorTable( sColorTable );
#endif

         return image;
      }

      default:
         std::cerr << "Unknown image type" << std::endl;
         break;
   }

   return QImage();
}

QPixmap QtHelper::cvMatToQPixmap( const cv::Mat &inMat )
{
   return QPixmap::fromImage( cvMatToQImage( inMat ) );
}
